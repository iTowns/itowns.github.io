<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Tutorial : Getting started - Fundamentals</title>

    <script src="../scripts/prettify/prettify.js"> </script>
    <script src="../scripts/prettify/lang-css.js"> </script>
    <link type="text/css" rel="stylesheet" href="../styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="../styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="../styles/itowns.css">
</head>

<body>

<section>

<header>
    <h1>Tutorial : Getting started - Fundamentals</h1>
</header>

<article>
    <p>ITowns is a javascript framework for 3D geographic data visualisation.
It can display a wide range of data such as ortho-images, Digital Elevation Models (DEM) or 3D models.</p>
<p>ITowns is based on <a href="https://threejs.org/">Three.js</a>, which is a javascript library that implements WebGL to render sophisticated 3D Geometry on a webpage.</p>
<p>In this tutorial, we shall be introduced to the fundamentals of iTowns : how it displays geographic data.</p>
<hr>
<h2>The View</h2>
<p>The support to display anything within iTowns is called a <code><a onclick="window.parent.goTo('api/View/View.html','api/View/View')" title="View">View</a></code>.</p>
<p>To provide geographic data visualization, a <code><a onclick="window.parent.goTo('api/View/View.html','api/View/View')" title="View">View</a></code> contains a combination of <a onclick="window.parent.goTo('api/Layer/Layer.html','api/Layer/Layer')" title="<code>Layers</code>"><code>Layers</code></a> which, in a digital map environment, are visual representations of any geographic data.
In other words, all data that are displayed using iTowns are supported by some <code>Layer</code>.</p>
<p>Each <code>View</code> in iTowns displays 3D data in a unique Coordinates Reference System (CRS).
Yet, the data displayed within a <code>View</code> do not necessarily have to be in the <code>View</code>'s CRS.
ITowns comes with two pre-made <code>View</code> types : <code><a onclick="window.parent.goTo('api/View/GlobeView.html','api/View/GlobeView')" title="GlobeView">GlobeView</a></code> and <code><a onclick="window.parent.goTo('api/View/PlanarView.html','api/View/PlanarView')" title="PlanarView">PlanarView</a></code>.
Each of these allows visualizing data from different types (raster or vector) and from different CRS.
On this matter, iTowns distinguishes two cases :</p>
<ul>
<li>The first one regards data that are to be displayed as raster.
These data can either be original raster data or vector data which are rasterized by iTowns and projected on the ground.
Data from this type are displayed in a <code>GlobeView</code> if their source CRS is <a href="https://epsg.io/4326">WGS 84</a> or <a href="https://epsg.io/3857">Pseudo-Mercator</a>.
However, if their source CRS defines a local projection (such as <a href="https://epsg.io/2154">RGF93 / Lambert 93</a> for instance), they are displayed in a <code>PlanarView</code>.</li>
<li>On another hand, vector data that are to be displayed as 3D objects can be displayed in any type of <code>View</code>, regardless of their source CRS since they can be converted by iTowns.</li>
</ul>
<p>It is important to acknowledge the following facts regarding original raster data and <code>Views</code> :</p>
<ul>
<li>a <code>GlobeView</code> allows displaying multiple raster data from two different source CRS : <a href="https://epsg.io/4326">WGS 84</a> and <a href="https://epsg.io/3857">Pseudo-Mercator</a>,</li>
<li>a <code>PlanarView</code> allows displaying multiple raster data, but all those data sources must have the same CRS.</li>
</ul>
<p>→<a href="Raster-data-WGS84.html"><strong><code>Visit GlobeView tutorial</code></strong></a></p>
<p>→<a href="Raster-data-Lambert93.html"><strong><code>Visit PlanarView tutorial</code></strong></a></p>
<hr>
<h2>Protocols and data formats</h2>
<p>ITowns comes with a wide range of compatible data sources. All available sources can be seen in the <code>Source</code> section of the
API documentation.
iTowns supports all the main geographic protocols: <a href="https://www.ogc.org/standards/wms">Web Map Service</a> with <code><a onclick="window.parent.goTo('api/Source/WMSSource.html','api/Source/WMSSource')" title="WMSSource">WMSSource</a></code>,
<a href="https://www.ogc.org/standards/wmts">Web Map Tiled Service</a> with <code><a onclick="window.parent.goTo('api/Source/WMTSSource.html','api/Source/WMTSSource')" title="WMTSSource">WMTSSource</a></code>, <a href="https://www.ogc.org/standards/wfs">Web Feature Service</a>
with <code><a onclick="window.parent.goTo('api/Source/WFSSource.html','api/Source/WFSSource')" title="WFSSource">WFSSource</a></code> and <a href="https://wiki.osgeo.org/wiki/Tile_Map_Service_Specification">Tile Map Service</a> and XYZ with <code><a onclick="window.parent.goTo('api/Source/TMSSource.html','api/Source/TMSSource')" title="TMSSource">TMSSource</a></code>.</p>
<p>iTowns also has sources for many data formats: <a href="https://docs.mapbox.com/help/glossary/vector-tiles/">vector tile</a> resources from <a href="https://www.mapbox.com/">MapBox</a> with <code><a onclick="window.parent.goTo('api/Source/VectorTilesSource.html','api/Source/VectorTilesSource')" title="VectorTilesSource">VectorTilesSource</a></code>, <a href="https://github.com/potree/potree">Potree</a> (<code><a onclick="window.parent.goTo('api/Source/PotreeSource.html','api/Source/PotreeSource')" title="PotreeSource">PotreeSource</a></code>) and
<a href="https://entwine.io/">Entwine</a> (<code><a onclick="window.parent.goTo('api/Source/EntwinePointTileSource.html','api/Source/EntwinePointTileSource')" title="EntwinePointTileSource">EntwinePointTileSource</a></code>) 3D point clouds, <a href="https://www.ogc.org/standards/3DTiles">3DTiles</a>
mesh (b3dm) and point clouds (pnts) from web servers (<code>C3DTilesSource</code>) and from Cesium ion <code>C3DTilesIonSource</code>,
<a href="https://geojson.org/">GeoJSON</a> with <code><a onclick="window.parent.goTo('api/Source/FileSource.html','api/Source/FileSource')" title="FileSource">FileSource</a></code> and <code>GeoJsonParser</code>,
<a href="https://www.ogc.org/standards/kml">KML</a> with <code><a onclick="window.parent.goTo('api/Source/FileSource.html','api/Source/FileSource')" title="FileSource">FileSource</a></code> and <code>KMLParser</code>, <a href="https://www.topografix.com/gpx.asp">GPX</a>
with <code><a onclick="window.parent.goTo('api/Source/FileSource.html','api/Source/FileSource')" title="FileSource">FileSource</a></code> and <code>GpxParser</code> and oriented images with <code><a onclick="window.parent.goTo('api/Source/OrientedImageSource.html','api/Source/OrientedImageSource')" title="OrientedImageSource">OrientedImageSource</a></code>.</p>
<p>It is also possible to create your own source and/or your own parser to read and add data from any format or protocol that is not supported by itowns.</p>
<hr>
<h2>Layers</h2>
<p>It was earlier mentioned that data are displayed as <a onclick="window.parent.goTo('api/Layer/Layer.html','api/Layer/Layer')" title="<code>Layers</code>"><code>Layers</code></a> within iTowns.
Several specific types of <code>Layers</code> exist, the use of which depends on the data to display :</p>
<ul>
<li><code><a onclick="window.parent.goTo('api/Layer/ColorLayer.html','api/Layer/ColorLayer')" title="ColorLayer">ColorLayer</a></code> can be used to display raster graphics or vector data that needs to be rasterized to be projected on the ground (left picture in the table bellow),</li>
<li><code><a onclick="window.parent.goTo('api/Layer/ElevationLayer.html','api/Layer/ElevationLayer')" title="ElevationLayer">ElevationLayer</a></code> can be used to display 3D elevation models (center picture in the table bellow),</li>
<li><code><a onclick="window.parent.goTo('api/Layer/GeometryLayer.html','api/Layer/GeometryLayer')" title="GeometryLayer">GeometryLayer</a></code> can be used to display 2D vector data or 3D objects, such as geometric shapes or buildings modelling (right picture in the table bellow).</li>
<li><code><a onclick="window.parent.goTo('api/Layer/FeatureGeometryLayer.html','api/Layer/FeatureGeometryLayer')" title="FeatureGeometryLayer">FeatureGeometryLayer</a></code> is a pre-configured <code><a onclick="window.parent.goTo('api/Layer/GeometryLayer.html','api/Layer/GeometryLayer')" title="GeometryLayer">GeometryLayer</a></code> which simplifies its implementation in given cases (e.g. to extrude 3D buildings).</li>
<li><code><a onclick="window.parent.goTo('api/Layer/PointCloudLayer.html','api/Layer/PointCloudLayer')" title="PointCloudLayer">PointCloudLayer</a></code> can be used to display 3D point clouds. Any point cloud formats are supported as long as the corresponding <code>Source</code> is provided.
Some point clouds formats such as Potree, Las and Entwine already have parsers defined in itowns that you can use. For 3D Tiles point clouds (pnts), use
<code>C3DTilesLayer</code>.</li>
<li><code><a onclick="window.parent.goTo('api/Layer/C3DTilesLayer.html','api/Layer/C3DTilesLayer')" title="C3DTilesLayer">C3DTilesLayer</a></code> can be used to display 3D Tiles layer (only b3dm and pnts).</li>
<li><code><a onclick="window.parent.goTo('api/Layer/OrientedImageLayer.html','api/Layer/OrientedImageLayer')" title="OrientedImageLayer">OrientedImageLayer</a></code> can be used to display oriented images.</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="images/Fundamentals-1.png" alt="color layer"></th>
<th style="text-align:center"><img src="images/Fundamentals-2.png" alt="elevation layer"></th>
<th style="text-align:center"><img src="images/Fundamentals-3.png" alt="geometry layer"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A simple <code>ColorLayer</code> is displayed</td>
<td style="text-align:center">An <code>ElevationLayer</code> is added to represent terrain elevation</td>
<td style="text-align:center">A <code>GeometryLayer</code> is added to model the buildings</td>
</tr>
</tbody>
</table>
<p>Note that <code><a onclick="window.parent.goTo('api/Layer/ColorLayer.html','api/Layer/ColorLayer')" title="ColorLayer">ColorLayer</a></code> and <code><a onclick="window.parent.goTo('api/Layer/ElevationLayer.html','api/Layer/ElevationLayer')" title="ElevationLayer">ElevationLayer</a></code> don't have their own geometry and are always <em>attached</em> to a <code><a onclick="window.parent.goTo('api/Layer/GeometryLayer.html','api/Layer/GeometryLayer')" title="GeometryLayer">GeometryLayer</a></code> (generally the layer representing the geometry of the globe or of the plane). <code><a onclick="window.parent.goTo('api/Layer/ColorLayer.html','api/Layer/ColorLayer')" title="ColorLayer">ColorLayer</a></code> are projected onto this <code><a onclick="window.parent.goTo('api/Layer/GeometryLayer.html','api/Layer/GeometryLayer')" title="GeometryLayer">GeometryLayer</a></code> and <code><a onclick="window.parent.goTo('api/Layer/ElevationLayer.html','api/Layer/ElevationLayer')" title="ElevationLayer">ElevationLayer</a></code> are used to read elevation and to apply it to a <code><a onclick="window.parent.goTo('api/Layer/GeometryLayer.html','api/Layer/GeometryLayer')" title="GeometryLayer">GeometryLayer</a></code>.</p>
<hr>
<h2>Style</h2>
<p>ITowns can display vector data in two ways : the data can be displayed in a <code><a onclick="window.parent.goTo('api/View/View.html','api/View/View')" title="View">View</a></code> as 3D objects, or as entities that are projected on the ground.
You can see bellow pictures illustrating the two cases.</p>
<table>
<thead>
<tr>
<th style="text-align:center"><img src="images/Fundamentals-4.png" alt="flattened vector data"></th>
<th style="text-align:center"><img src="images/Fundamentals-5.png" alt="3d vector data"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Vector data projected on the ground</td>
<td style="text-align:center">Vector data display as 3D objects</td>
</tr>
</tbody>
</table>
<p>In both ways, the appearance and positioning of the vector data can be adjusted by modifying the <code><a onclick="window.parent.goTo('api/Base/Style.html','api/Base/Style')" title="Style">Style</a></code> parameter of the <code>Layer</code> the data are displayed in.
The <code>Style</code> in iTowns comes with several properties :</p>
<ul>
<li><code>fill</code> allows defining style rules for polygons interior,</li>
<li><code>stroke</code> allows defining style rules for lines and polygons edges,</li>
<li><code>point</code> allows defining style rules for points.</li>
</ul>
<p>Each of these three properties comes with a bunch of parameters to set vector data appearance and positioning, such as <code>color</code>, <code>opacity</code>, <code>width</code>, <code>base_altitude</code>...
You can find a list of all the possible parameters in <code>Style</code> <a onclick="window.parent.goTo('api/Base/Style.html','api/Base/Style')" title="documentation">documentation</a>.</p>
<p>These parameters can be set as static values or as functions of the vector data properties.
For example, let's suppose some vector data contains polygons.
Setting <code>fill.color</code> to <code>red</code> will color all the polygons in red.
If on another hand, all polygons come with a <code>color</code> property within the vector data, you can access it within <code>Style</code> in two ways :</p>
<ul>
<li>either by using brackets, which in our example results in setting <code>fill.color</code> to <code>'{color}'</code> ;</li>
<li>or by passing a method to the <code>fill.color</code> value.
The first parameter of this method will automatically be an object containing all the properties of the vector data.
In our example, the method could simply return the <code>color</code> property.</li>
</ul>
<p>ITowns offers the possibility to display labels attached to points.
The content and appearance of the labels can be set the same way as for the polygons, lines and points : using a <code>Style</code> property which is called <code>text</code>.
For instance, setting <code>text.field</code> to <code>'{name}'</code> will display a label on each point that has a <code>name</code> property within the vector data.
The content of the label will be the content stored in the data under the <code>name</code> property.</p>
<h3>Vector data projected on the ground</h3>
<p>When vector data are flattened on the ground, they are displayed in a <code><a onclick="window.parent.goTo('api/Layer/ColorLayer.html','api/Layer/ColorLayer')" title="ColorLayer">ColorLayer</a></code>.
In that case, the data basically consist in polygons, lines or points.
Their appearance can be adjusted by modifying the <code><a onclick="window.parent.goTo('api/Base/Style.html','api/Base/Style')" title="Style">Style</a></code> of the <code><a onclick="window.parent.goTo('api/Layer/ColorLayer.html','api/Layer/ColorLayer')" title="ColorLayer">ColorLayer</a></code>.
Yet, their positioning can't be modified since it is computed so that tey appear projected on the ground.</p>
<p>→<a href="Vector-data-on-ground.html"><strong><code>Visit tutorial</code></strong></a></p>
<h3>Vector data displayed as 3D objects</h3>
<p>In the case of vector data represented as 3D objects, the data are displayed in a <code><a onclick="window.parent.goTo('api/Layer/GeometryLayer.html','api/Layer/GeometryLayer')" title="GeometryLayer">GeometryLayer</a></code>.
The appearance and positioning of the vector data can be adjusted by modifying the <code><a onclick="window.parent.goTo('api/Base/Style.html','api/Base/Style')" title="Style">Style</a></code> of the <code><a onclick="window.parent.goTo('api/Layer/GeometryLayer.html','api/Layer/GeometryLayer')" title="GeometryLayer">GeometryLayer</a></code>.
Two parameters allow modifying the data position :</p>
<ul>
<li><code>base_altitude</code> which defines the altitude at the base of the 3D objects ;</li>
<li><code>extrusion_height</code> which defines the height of the 3D objects, giving them volume.</li>
</ul>
<p>For example, given a set of polygons, setting <code>fill.base_altitude</code> to <code>500</code> and <code>fill.extrusion_height</code> to <code>20</code> will render extruded polygon expanding between 500 and 520 meters of altitude.</p>
<p>→<a href="Vector-data-3d.html"><strong><code>Visit tutorial</code></strong></a></p>
</article>

</section>

<script> prettyPrint(); </script>
<script src="../scripts/linenumber.js"> </script>
</body>
</html>